$((function(){$(".header-slider").slick({infinite:!0,fade:!0,asNavFor:".slider-dots",prevArrow:'<div class="arrow arrow-left"><img class="slider-arrows slider-arrows__left" src="images/icons/arrow-left.svg" alt=""></img></div>',nextArrow:'<div class="arrow arrow-right"><img class="slider-arrows slider-arrows__right" src="images/icons/arrow-right.svg" alt=""></img></div>'}),$(".slider-dots").slick({slidesToShow:4,slidesToScroll:4,asNavFor:".header-slider",focusOnSelect:!0});let e=document.querySelectorAll(".header-slider__item");$(".header-slider").on("beforeChange",(function(t,a,s,n){let r=0;s<n?r=s+1:s>n&&(r=s-1);let o=e[r],i=o.querySelector(".header-slider__item-title"),l=o.querySelector(".header-slider__item-text"),d=o.querySelector(".header-btn");o&&(i.classList.add("animate__animated"),i.classList.add("animate__slideInDown"),l.classList.add("animate__animated"),l.classList.add("animate__fadeInUp"),l.classList.add("animate__delay-1s"),d.classList.add("animate__animated"),d.classList.add("animate__fadeInUp"),d.classList.add("animate__delay-1s"),i.addEventListener("animationend",()=>{i.classList.remove("animate__animated"),i.classList.remove("animate__slideInDown")}),l.addEventListener("animationend",()=>{l.classList.remove("animate__animated"),l.classList.remove("animate__fadeInUp"),l.classList.remove("animate__delay-1s")}),d.addEventListener("animationend",()=>{d.classList.remove("animate__animated"),d.classList.remove("animate__fadeInUp"),d.classList.remove("animate__delay-1s")}))})),$(".project__slider").slick({slidesToShow:5,slidesToScroll:3,arrows:!1,dots:!0,responsive:[{breakpoint:1150,settings:{slidesToShow:4,slidesToScroll:4,arrows:!1,dots:!0}},{breakpoint:800,settings:{slidesToShow:3,slidesToScroll:3,arrows:!1,dots:!0}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0}}]}),$(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}})}));let isScrolling=!1,firstBox=document.querySelector(".contacts"),mapItem1=firstBox.querySelector(".contacts__map-item--1").querySelector(".contacts__map-marker"),mapItem2=firstBox.querySelector(".contacts__map-item--2").querySelector(".contacts__map-marker"),mapItem3=firstBox.querySelector(".contacts__map-item--3").querySelector(".contacts__map-marker"),mapItem4=firstBox.querySelector(".contacts__map-item--4").querySelector(".contacts__map-marker"),mapItem5=firstBox.querySelector(".contacts__map-item--5").querySelector(".contacts__map-marker"),contactForm=firstBox.querySelector(".contact-form"),aboutUs=document.querySelector(".about-us"),aboutUs1=aboutUs.querySelector(".about-us__images--1"),aboutUs2=aboutUs.querySelector(".about-us__images--2"),workStep=document.querySelector(".work-step"),workStepTitle=workStep.querySelector(".work-step__title"),workStepInner=workStep.querySelector(".work-step__inner"),offers=document.querySelector(".offers"),offersTitle=offers.querySelector(".offers__title"),offersText=offers.querySelector(".offers__text"),offersList=offers.querySelector(".offers__list"),advantages=document.querySelector(".advantages"),advantagesItem1=advantages.querySelector(".advantages__list-item--1"),advantagesItem2=advantages.querySelector(".advantages__list-item--2"),advantagesItem3=advantages.querySelector(".advantages__list-item--3"),advantagesItem4=advantages.querySelector(".advantages__list-item--4");function throttleScroll(e){0==isScrolling&&window.requestAnimationFrame((function(){scrolling(e),isScrolling=!1})),isScrolling=!0}function isPartiallyVisible(e,t){let a=e.getBoundingClientRect(),s=a.top-t,n=a.bottom,r=a.height-t;return s+r>=0&&r+window.innerHeight>=n}function addClasses(e,t){return t.forEach(t=>{e.classList.add(""+t)}),e}function scrolling(e){isPartiallyVisible(firstBox,200)&&(addClasses(mapItem1,["animate__animated","animate__fadeIn","animate__delay-1s","animate__slow"]),addClasses(mapItem2,["animate__animated","animate__fadeIn","animate__delay-2s","animate__slow"]),addClasses(mapItem3,["animate__animated","animate__fadeIn","animate__delay-3s","animate__slow"]),addClasses(mapItem4,["animate__animated","animate__fadeIn","animate__delay-4s","animate__slow"]),addClasses(mapItem5,["animate__animated","animate__fadeIn","animate__delay-5s","animate__slow"]),addClasses(contactForm,["animate__animated","animate__bounceInRight","animate__delay-3s"])),isPartiallyVisible(aboutUs,50)&&(addClasses(aboutUs1,["animate__animated","animate__fadeInUp"]),addClasses(aboutUs2,["animate__animated","animate__fadeInRight","animate__delay-1s"])),isPartiallyVisible(workStep,80)&&(addClasses(workStepTitle,["animate__animated","animate__fadeInLeft"]),addClasses(workStepInner,["animate__animated","animate__bounceInUp","animate__delay-1s"])),isPartiallyVisible(offers,80)&&(addClasses(offersTitle,["animate__animated","animate__fadeInLeft"]),addClasses(offersText,["animate__animated","animate__fadeInLeft"]),addClasses(offersList,["animate__animated","animate__bounceInUp","animate__delay-1s"])),isPartiallyVisible(advantages,0)&&(addClasses(advantagesItem1,["animate__animated","animate__fadeInLeftBig","animate__delay-3s"]),addClasses(advantagesItem2,["animate__animated","animate__fadeInLeftBig","animate__delay-2s"]),addClasses(advantagesItem3,["animate__animated","animate__fadeInLeftBig","animate__delay-1s"]),addClasses(advantagesItem4,["animate__animated","animate__fadeInLeftBig"]))}window.addEventListener("scroll",throttleScroll,!1),document.addEventListener("DOMContentLoaded",scrolling,!1);const calc=(e=100)=>{const t=document.querySelector(".price"),a=t.querySelector(".price__box"),s=t.querySelector(".prise__select"),n=t.querySelector(".price-square"),r=t.querySelector(".price-day"),o=t.querySelector(".price-count"),i=document.getElementById("total");a.addEventListener("input",e=>{const t=e.target;"INPUT"===t.tagName&&(t.value=t.value.replace(/[^\+?0-9\.]/g,""))});a.addEventListener("change",t=>{const a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,l=1;const d=s.options[s.selectedIndex].value,c=+n.value;o.value>1&&(a+=(o.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),d&&c&&(t=parseInt(e*d*c*a*l));const m=()=>{const e=+t,a=+i.textContent;let s=20;e>5e3&&e<3e4?s=50:e>=3e4&&e<1e5?s=200:e>=1e5&&(s=4e3),a<e?(i.textContent=a+s,setTimeout(m,1)):a>e+50?(i.textContent=a-s,setTimeout(m,1)):i.textContent=t};m()})()})};calc(100);const getSmoothScroll=()=>{const e=document.querySelector(".menu"),t=document.querySelector(".menu__list"),a=document.querySelector(".header__burger"),s=e.querySelector("ul").querySelectorAll("a"),n=document.querySelector(".header__arrows-btn"),r=e=>{e.addEventListener("click",(function(s){s.preventDefault();const n=e.getAttribute("href");document.querySelector(""+n).scrollIntoView({behavior:"smooth",block:"start"}),t.classList.contains("menu__list--open")&&(t.classList.remove("menu__list--open"),a.classList.remove("header__burger--active"))}))};s.forEach(e=>{r(e)}),r(n)};getSmoothScroll();const togglePopup=()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".offers-item__link"),a=document.querySelector(".popup-close");t.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),e.style.display="block"})}),a.addEventListener("click",()=>{e.style.display="none"}),e.addEventListener("click",t=>{let a=t.target;a.classList.contains("popup-close")?e.style.display="none":(a=a.closest(".popup-content"),a||(e.style.display="none"))})};togglePopup();let headerBurger=document.querySelector(".header__burger"),menuList=document.querySelector(".menu__list");headerBurger.addEventListener("click",()=>{headerBurger.classList.toggle("header__burger--active"),menuList.classList.toggle("menu__list--open")});const forms=document.querySelectorAll("._form");console.log("hi");const message={loading:"images/icons/spinner.svg",success:"Спасибо! Скоро мы с вами свяжемся",failure:"Что-то пошло не так..."};function postData(e){e.addEventListener("submit",t=>{t.preventDefault();let a=document.createElement("img");a.src=message.loading,a.style.cssText="\n         display: block;\n         margin: 0 auto;\n     ",e.insertAdjacentElement("afterend",a);const s=new XMLHttpRequest;s.open("POST","server.php"),s.setRequestHeader("Content-type","application/json; charset=utf-8");const n=new FormData(e),r={};n.forEach((function(e,t){r[t]=e}));const o=JSON.stringify(r);s.send(o),s.addEventListener("load",()=>{200===s.status?(console.log(s.response),alert(message.success),a.remove(),e.reset()):alert(message.failure)})})}forms.forEach(e=>{postData(e)});